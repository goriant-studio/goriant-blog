---
import BaseLayout from "../../../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog-vi"))
  .filter((p) => p.data.game === "maze-escape")
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BaseLayout lang="vi">
  <main class="mx-auto max-w-5xl px-6 pt-40 pb-28">
    <a href="/vi/games/maze-escape" class="text-sm text-white/60 hover:text-white">
      ← Quay lại MazeEscape
    </a>

    <header class="mt-6 mb-8">
      <h1 class="text-2xl font-bold text-white">
        Devlog – MazeEscape
      </h1>
      <p class="mt-2 text-white/70 text-sm">
        Nhật ký phát triển riêng cho MazeEscape.
      </p>
    </header>

    <div class="grid gap-6 md:grid-cols-2">
        {posts.map((post) => {
            const slug = post.id
            .split("/")
            .pop()
            ?.replace(/\.(md|mdx)$/, "");

            return (
                <a
                    href={`/vi/blog/${slug}`}
                    class="rounded-xl bg-white/5 border border-white/10 p-6 hover:bg-white/10 transition"
                >
                    <p class="text-xs text-white/50">
                    {post.data.date.toLocaleDateString("vi-VN")}
                    </p>

                    <h2 class="mt-2 text-lg font-semibold text-white">
                    {post.data.title}
                    </h2>

                    {post.data.description && (
                    <p class="mt-2 text-sm text-white/70">
                        {post.data.description}
                    </p>
                    )}
                </a>
                );
            })}
    </div>

    {posts.length === 0 && (
      <p class="text-white/60">Chưa có devlog nào cho game này.</p>
    )}
  </main>
</BaseLayout>
